console.log("üîÑ Single Widget Script Loading...",(new Date).toISOString()),window.PromptReviews&&window.PromptReviews.renderSingleWidget||function(){function e(){return new Promise((e,n)=>{if("undefined"!=typeof Swiper)return console.log("Swiper already loaded"),void e();if(document.querySelector('script[src*="swiper"]'))return console.log("Swiper script already loading, waiting..."),void function(e,n=10){let t=0;const o=()=>{t++,"undefined"!=typeof Swiper?(console.log("Swiper detected after",t,"attempts"),e()):t<n?setTimeout(o,100):(console.error("Swiper not available after",n,"attempts"),e())};o()}(e,20);console.log("Loading Swiper script...");const t=document.createElement("script");t.src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js",t.async=!0,t.onload=()=>{console.log("Swiper script loaded successfully"),e()},t.onerror=()=>{console.error("Failed to load Swiper script"),n(new Error("Failed to load Swiper"))},document.head.appendChild(t)})}function n(){const e=function(){const e=document.getElementsByTagName("script");for(let n=0;n<e.length;n++)if(e[n].src&&e[n].src.includes("widget-embed.js"))return e[n].src;return null}();if(!e)return void console.error("PromptReviews Widget: Could not determine script URL to load styles.");const n=`?v=${(new Date).getTime()}`,t=e.replace("widget-embed.js","single-widget.css")+n;console.log("PromptReviews Widget: Attempting to load CSS from:",t);const o=document.createElement("link");o.id="promptreviews-widget-css",o.rel="stylesheet",o.type="text/css",o.href=t,o.onload=()=>{console.log("PromptReviews Widget: CSS loaded successfully")},o.onerror=()=>{console.error("PromptReviews Widget: Failed to load CSS from:",t)},document.head.appendChild(o)}function t(e,n,t){return`\n        <div id="${"promptreviews-single-widget-"+Math.random().toString(36).substr(2,9)}" class="pr-single-widget" style="${`\n        --pr-bg-color: ${n.bgColor||"#ffffff"};\n        --pr-text-primary: ${n.textColor||"#22223b"};\n        --pr-text-secondary: ${n.bodyTextColor||"#6b7280"};\n        --pr-accent-color: ${n.accentColor||"#6a5acd"};\n        --pr-border-color: ${n.borderColor||"#cccccc"};\n        --pr-border-width: ${n.borderWidth||2}px;\n        --pr-border-radius: ${n.borderRadius||16}px;\n        --pr-shadow-intensity: ${n.shadowIntensity||.2};\n        --pr-shadow-color: ${n.shadowColor||"#222222"};\n        --pr-line-spacing: ${n.lineSpacing||1.75};\n        --pr-attribution-font-size: ${n.attributionFontSize||16}px;\n        --pr-name-text-color: ${n.nameTextColor||"#111111"};\n        --pr-role-text-color: ${n.roleTextColor||"#666666"};\n        --pr-font: ${n.font||"Inter"};\n      `}">\n          <div class="widget-carousel-container">\n            <div class="swiper">\n              <div class="swiper-wrapper">\n                ${e.map((e,t)=>{o=e.first_name,r=e.last_name,`${(o||"").charAt(0)}${(r||"").charAt(0)}`.toUpperCase();var o,r;const i=n.showRelativeDate?function(e){const n=new Date,t=new Date(e),o=Math.floor((n-t)/1e3);return o<60?"just now":o<3600?`${Math.floor(o/60)}m ago`:o<86400?`${Math.floor(o/3600)}h ago`:o<2592e3?`${Math.floor(o/86400)}d ago`:o<31536e3?`${Math.floor(o/2592e3)}mo ago`:`${Math.floor(o/31536e3)}y ago`}(e.created_at):new Date(e.created_at).toLocaleDateString();return`\n          <div class="swiper-slide">\n            <div class="pr-review-card">\n              <div class="stars-row">\n                <span style="color: #FFD700; font-size: 36px;">${function(e){const n=Math.floor(e),t=e%1!=0,o=5-n-(t?1:0);return"‚òÖ".repeat(n)+(t?"‚òÜ":"")+"‚òÜ".repeat(o)}(e.star_rating||5)}</span>\n              </div>\n              <div class="review-content">\n                ${n.showQuotes?'<span class="decorative-quote decorative-quote-open">‚Äú</span>':""}\n                <div class="review-text">${e.review_content}</div>\n                ${n.showQuotes?'<span class="decorative-quote decorative-quote-close">‚Äù</span>':""}\n              </div>\n              <div class="reviewer-details">\n                <div class="reviewer-name">${e.first_name} ${e.last_name}</div>\n                ${e.reviewer_role?`<div class="reviewer-role">${e.reviewer_role}</div>`:""}\n                <div class="reviewer-date">${i}</div>\n              </div>\n            </div>\n          </div>\n        `}).join("")}\n              </div>\n              <div class="swiper-pagination"></div>\n            </div>\n            <div class="swiper-button-prev">‚Äπ</div>\n            <div class="swiper-button-next">‚Ä∫</div>\n          </div>\n          ${n.showSubmitReviewButton&&t?`\n            <div class="submit-review-button-container">\n              <a href="https://promptreviews.app/r/${t}"\n                 class="submit-review-button"\n                 target="_blank"\n                 rel="noopener noreferrer">\n                Submit a review\n              </a>\n            </div>\n          `:""}\n        </div>\n      `}function o(e,n){console.log("Rendering Single Widget with data:",n);const{reviews:o,design:r,businessSlug:i}=n;if(!o||0===o.length)return void(e.innerHTML='<div style="text-align: center; padding: 2rem; color: #666;">No reviews available</div>');e.innerHTML="";const a=t(o,r,i);e.innerHTML=a;const s=e.querySelector(".pr-single-widget");s&&function(e,n){const t=e.querySelector(".swiper");t?new Swiper(t,{slidesPerView:1,spaceBetween:16,loop:!1!==n.loop,observer:!0,observeParents:!0,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},pagination:{el:".swiper-pagination",clickable:!0}}):console.error("Swiper container .swiper not found")}(s,r),console.log("Single Widget rendered successfully")}async function r(){console.log("Loading Single Widgets..."),function(){if(document.getElementById("swiper-css"))return;const e=document.createElement("style");e.id="swiper-css",e.textContent="\n        .swiper-button-next,\n        .swiper-button-prev {\n          position: absolute;\n          top: 50%;\n          width: 27px;\n          height: 44px;\n          margin-top: calc(0px - (44px / 2));\n          z-index: 10;\n          cursor: pointer;\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          color: var(--swiper-navigation-color, var(--swiper-theme-color));\n        }\n        .swiper-button-next.swiper-button-disabled,\n        .swiper-button-prev.swiper-button-disabled {\n          opacity: 0.35;\n          cursor: auto;\n          pointer-events: none;\n        }\n        .swiper-button-next:after,\n        .swiper-button-prev:after {\n          font-family: swiper-icons;\n          font-size: 44px;\n          text-transform: none !important;\n          letter-spacing: 0;\n          text-transform: none;\n          font-variant: initial;\n          line-height: 1;\n        }\n        .swiper-button-prev,\n        .swiper-rtl .swiper-button-next {\n          left: 10px;\n          right: auto;\n        }\n        .swiper-button-prev:after,\n        .swiper-rtl .swiper-button-next:after {\n          content: 'prev';\n        }\n        .swiper-button-next,\n        .swiper-rtl .swiper-button-prev {\n          right: 10px;\n          left: auto;\n        }\n        .swiper-button-next:after,\n        .swiper-rtl .swiper-button-prev:after {\n          content: 'next';\n        }\n        .swiper-button-lock {\n          display: none;\n        }\n        .swiper-pagination {\n          position: relative;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          margin-top: 16px;\n        }\n        .swiper-pagination.swiper-pagination-hidden {\n          opacity: 0;\n        }\n        .swiper-pagination-disabled > .swiper-pagination,\n        .swiper-pagination.swiper-pagination-disabled {\n          display: none !important;\n        }\n        .swiper-pagination-bullet {\n          width: 8px !important;\n          height: 8px !important;\n          background: #ccc;\n          opacity: 1;\n          margin: 0 4px;\n          transition: all 0.2s ease;\n          border-radius: 50%;\n          display: inline-block;\n        }\n        .swiper-pagination-bullet-active {\n          transform: scale(1.2);\n          background: var(--swiper-pagination-color, var(--swiper-theme-color));\n        }\n        .swiper-button-disabled {\n          opacity: 0.5;\n          cursor: not-allowed;\n        }\n        \n        /* Responsive classes for embedded widget */\n        .hidden { display: none !important; }\n        .block { display: block !important; }\n        .flex { display: flex !important; }\n        .flex-col { flex-direction: column !important; }\n        .items-center { align-items: center !important; }\n        .justify-center { justify-content: center !important; }\n        .justify-end { justify-content: flex-end !important; }\n        .w-full { width: 100% !important; }\n        .max-w-5xl { max-width: 64rem !important; }\n        .max-w-\\[400px\\] { max-width: 400px !important; }\n        .mx-auto { margin-left: auto !important; margin-right: auto !important; }\n        .px-4 { padding-left: 1rem !important; padding-right: 1rem !important; }\n        .px-8 { padding-left: 2rem !important; padding-right: 2rem !important; }\n        .mt-4 { margin-top: 1rem !important; }\n        .pr-8 { padding-right: 2rem !important; }\n        .relative { position: relative !important; }\n        .absolute { position: absolute !important; }\n        .top-1\\/2 { top: 50% !important; }\n        .-translate-y-1\\/2 { transform: translateY(-50%) !important; }\n        .-left-8 { left: -2rem !important; }\n        .-right-8 { right: -2rem !important; }\n        .left-0 { left: 0 !important; }\n        .right-0 { right: 0 !important; }\n        .z-10 { z-index: 10 !important; }\n        .rounded-full { border-radius: 9999px !important; }\n        .w-10 { width: 2.5rem !important; }\n        .h-10 { height: 2.5rem !important; }\n        .min-w-10 { min-width: 2.5rem !important; }\n        .min-h-10 { min-height: 2.5rem !important; }\n        .border { border-width: 1px !important; }\n        .border-gray-200 { border-color: #e5e7eb !important; }\n        .transition { transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter !important; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1) !important; transition-duration: 150ms !important; }\n        .hover\\:bg-opacity-80:hover { --tw-bg-opacity: 0.8 !important; }\n        .md\\:block { display: none; }\n        .md\\:hidden { display: block; }\n        \n        @media (min-width: 768px) {\n          .md\\:block { display: block !important; }\n          .md\\:hidden { display: none !important; }\n        }\n        .group:focus .group-focus\\:fill-white { fill: white !important; }\n        .overflow-hidden { overflow: hidden !important; }\n        \n        .md\\:block { display: none; }\n        .md\\:flex { display: none; }\n      ",document.head.appendChild(e)}(),function(){if(!document.querySelector('link[href*="fonts.googleapis.com"]')){const e=document.createElement("link");e.rel="stylesheet",e.href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap",document.head.appendChild(e),console.log("Google Fonts (Inter) added to page")}}(),n(),await e();const t=document.querySelectorAll('[data-widget-type="single"]');console.log("Found",t.length,"single widget containers"),t.forEach(async e=>{if(e.getAttribute("data-widget"))try{o(e,{reviews:[{id:"1",review_content:"This is an amazing product! I love how easy it is to use and the results are fantastic.",first_name:"John",last_name:"Doe",reviewer_role:"Product Manager",platform:"Google",created_at:"2024-01-15T10:30:00Z",star_rating:5},{id:"2",review_content:"Excellent service and great value for money. Highly recommend!",first_name:"Jane",last_name:"Smith",reviewer_role:"Marketing Director",platform:"Yelp",created_at:"2024-01-10T14:20:00Z",star_rating:5}],design:{bgColor:"#ffffff",textColor:"#22223b",accentColor:"#6a5acd",borderColor:"#cccccc",borderWidth:2,borderRadius:16,shadowIntensity:.2,shadowColor:"#222222",lineSpacing:1.75,attributionFontSize:16,nameTextColor:"#111111",roleTextColor:"#666666",font:"Inter",showQuotes:!0,showRelativeDate:!1,showSubmitReviewButton:!0,autoAdvance:!1,slideshowSpeed:4},businessSlug:"demo-business"})}catch(n){console.error("Error rendering single widget:",n),e.innerHTML='<div style="text-align: center; padding: 2rem; color: #666;">Error loading widget</div>'}else console.error("No widget ID found")})}console.log("IIFE starting..."),window.PromptReviews=window.PromptReviews||{},window.PromptReviews.renderSingleWidget=o,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",r):r()}();