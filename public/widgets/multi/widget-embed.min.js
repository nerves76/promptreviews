"use strict";var PromptReviewsWidget=(()=>{var H=new Date().toLocaleString();console.log("Widget script starting... Build time:",H);(function(){console.log("IIFE starting..."),window.PromptReviews=window.PromptReviews||{},console.log("Swiper available:",typeof Swiper!="undefined");function q(e,o=1){e=e.replace(/^#/,""),e.length===3&&(e=e.split("").map(s=>s+s).join(""));let n=parseInt(e,16),i=n>>16&255,r=n>>8&255,l=n&255;return`rgba(${i},${r},${l},${o})`}function I(e,o=.7){e=e.replace(/^#/,""),e.length===3&&(e=e.split("").map(s=>s+s).join(""));let n=parseInt(e,16),i=n>>16&255,r=n>>8&255,l=n&255;return i=Math.round(i+(255-i)*o),r=Math.round(r+(255-r)*o),l=Math.round(l+(255-l)*o),`#${((1<<24)+(i<<16)+(r<<8)+l).toString(16).slice(1)}`}function P(e){let o="";for(let n=1;n<=5;n++)o+=`<svg width="18" height="18" viewBox="0 0 20 20" fill="${n<=e?"#FBBF24":"#E5E7EB"}" stroke="#FBBF24" style="display: inline-block; margin-right: 2px;"><polygon points="10,1 12.59,7.36 19.51,7.64 14,12.14 15.82,18.99 10,15.27 4.18,18.99 6,12.14 0.49,7.64 7.41,7.36"></polygon></svg>`;return o}function J(e){let o=new Date,n=new Date(e),i=o.getTime()-n.getTime(),r=Math.floor(i/1e3),l=Math.floor(r/60),s=Math.floor(l/60),c=Math.floor(s/24),a=Math.floor(c/7),k=Math.floor(c/30),p=Math.floor(c/365);return p>0?`${p} year${p>1?"s":""} ago`:k>0?`${k} month${k>1?"s":""} ago`:a>0?`${a} week${a>1?"s":""} ago`:c>0?`${c} day${c>1?"s":""} ago`:s>0?`${s} hour${s>1?"s":""} ago`:l>0?`${l} minute${l>1?"s":""} ago`:"just now"}function U(e,o){let n=e?e[0]:"",i=o?o[0]:"";return(n+i).toUpperCase()}function V(e){return`
            @import url('https://fonts.googleapis.com/css?family=Inter:100,200,300,400,500,600,700,800,900&display=swap');
            @font-face { 
                font-family:'Inter Fallback'; 
                src:local("Arial"); 
                ascent-override:90.44%; 
                descent-override:22.52%; 
                line-gap-override:0.00%; 
                size-adjust:107.12%; 
            }

            /* Base styles */
            .${e} {
                font-family: 'Inter', 'Inter Fallback', system-ui, -apple-system, sans-serif;
                --pr-accent-color: slateblue;
                --pr-accent-hover: #4a3f8c;
                --pr-text-primary: #22223b;
                --pr-text-secondary: #6b7280;
                --pr-border-color: #cccccc;
                --pr-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                --pr-card-bg: #ffffff;
                --pr-card-border: 2px solid var(--pr-border-color);
                --pr-card-radius: 16px;
                --pr-card-shadow: 0 4px 32px rgba(34, 34, 34, 0.2) inset;
            }

            /* Build timestamp */
            .${e} .build-timestamp {
                position: fixed;
                bottom: 0;
                right: 0;
                background: rgba(0, 0, 0, 0.7);
                color: white;
                padding: 4px 8px;
                font-size: 12px;
                z-index: 9999;
                border-top-left-radius: 4px;
            }

            /* Swiper pagination styles */
            .${e} .swiper-pagination {
                position: relative !important;
                bottom: auto !important;
                display: flex !important;
                justify-content: center;
                align-items: center;
                gap: 8px;
                margin-top: 24px;
                width: auto !important;
            }

            .${e} .swiper-pagination-bullet {
                width: 8px !important;
                height: 8px !important;
                background: #d1d5db !important;
                opacity: 1 !important;
                transition: all 0.3s ease;
                margin: 0 4px !important;
            }

            .${e} .swiper-pagination-bullet-active {
                background: var(--pr-accent-color, slateblue) !important;
                transform: scale(1.2);
            }

            /* Layout */
            .${e} .hidden {
                display: none;
            }

            @media (min-width: 768px) {
                .${e} .md\\:flex {
                    display: flex;
                }
            }

            .${e} .w-full {
                width: 100%;
            }

            .${e} .justify-center {
                justify-content: center;
            }

            .${e} .relative {
                position: relative;
            }

            .${e} .max-w-5xl {
                max-width: 64rem;
            }

            .${e} .mx-auto {
                margin-left: auto;
                margin-right: auto;
            }

            .${e} .px-8 {
                padding-left: 2rem;
                padding-right: 2rem;
            }

            /* Navigation Buttons */
            .${e} .group {
                position: relative;
            }

            .${e} .absolute {
                position: absolute;
            }

            .${e} .-left-8 {
                left: -2rem;
            }

            .${e} .-right-8 {
                right: -2rem;
            }

            .${e} .top-1\\/2 {
                top: 50%;
            }

            .${e} .-translate-y-1\\/2 {
                transform: translateY(-50%);
            }

            .${e} .z-10 {
                z-index: 10;
            }

            .${e} .rounded-full {
                border-radius: 9999px;
            }

            .${e} .border {
                border-width: 1px;
            }

            .${e} .border-gray-200 {
                border-color: #e5e7eb;
            }

            .${e} .w-10 {
                width: 2.5rem;
            }

            .${e} .h-10 {
                height: 2.5rem;
            }

            .${e} .flex {
                display: flex;
            }

            .${e} .items-center {
                align-items: center;
            }

            .${e} .transition {
                transition-property: color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;
                transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
                transition-duration: 150ms;
            }

            .${e} .hover\\:bg-opacity-80:hover {
                --tw-bg-opacity: 0.8;
            }

            .${e} .active\\:scale-95:active {
                transform: scale(0.95);
            }

            .${e} .focus\\:scale-95:focus {
                transform: scale(0.95);
            }

            .${e} .focus\\:outline-none:focus {
                outline: 2px solid transparent;
                outline-offset: 2px;
            }

            .${e} .focus-visible\\:outline:focus-visible {
                outline-style: solid;
            }

            .${e} .focus-visible\\:outline-2:focus-visible {
                outline-width: 2px;
            }

            .${e} .focus-visible\\:outline-\\[var\\(--pr-accent-color\\)\\]:focus-visible {
                outline-color: var(--pr-accent-color);
            }

            .${e} .focus-visible\\:outline-offset-2:focus-visible {
                outline-offset: 2px;
            }

            /* Swiper Styles */
            .${e} .swiper {
                width: 100%;
                padding: 2rem 0;
            }

            .${e} .swiper-slide {
                display: flex;
                justify-content: center;
                align-items: center;
            }

            .${e} .swiper-slide-active {
                z-index: 1;
            }

            /* Card Styles */
            .${e} .w-full {
                width: 100%;
            }

            .${e} .h-\\[380px\\] {
                height: 380px;
            }

            .${e} .flex-col {
                flex-direction: column;
            }

            .${e} .rounded-3xl {
                border-radius: 1.5rem;
            }

            .${e} .overflow-hidden {
                overflow: hidden;
            }

            .${e} .bg-white {
                background-color: #ffffff;
            }

            .${e} .px-2 {
                padding-left: 0.5rem;
                padding-right: 0.5rem;
            }

            .${e} .py-4 {
                padding-top: 1rem;
                padding-bottom: 1rem;
            }

            .${e} .shadow {
                box-shadow: 0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);
            }

            .${e} .text-sm {
                font-size: 0.875rem;
                line-height: 1.25rem;
            }

            /* Star Rating */
            .${e} .mb-2 {
                margin-bottom: 0.5rem;
            }

            .${e} .mt-0 {
                margin-top: 0;
            }

            /* Review Content */
            .${e} .flex-1 {
                flex: 1 1 0%;
            }

            .${e} .min-h-0 {
                min-height: 0;
            }

            .${e} .text-center {
                text-align: center;
            }

            .${e} .text-gray-800 {
                color: #1f2937;
            }

            .${e} .break-words {
                word-break: break-word;
            }

            .${e} .whitespace-pre-line {
                white-space: pre-line;
            }

            .${e} .relative {
                position: relative;
            }

            .${e} .overflow-hidden {
                overflow: hidden;
            }

            .${e} .line-clamp-5 {
                display: -webkit-box;
                -webkit-line-clamp: 5;
                -webkit-box-orient: vertical;
            }

            .${e} .mx-6 {
                margin-left: 1.5rem;
                margin-right: 1.5rem;
            }

            .${e} .text-\\[14px\\] {
                font-size: 14px;
            }

            .${e} .md\\:text-\\[16px\\] {
                font-size: 16px;
            }

            .${e} .z-10 {
                z-index: 10;
            }

            .${e} .leading-relaxed {
                line-height: 1.625;
            }

            /* Reviewer Info */
            .${e} .gap-1 {
                gap: 0.25rem;
            }

            .${e} .mt-auto {
                margin-top: auto;
            }

            .${e} .font-semibold {
                font-weight: 600;
            }

            .${e} .text-xs {
                font-size: 0.75rem;
                line-height: 1rem;
            }
        `}function L(e,o){var R,T;console.log("renderMultiWidget called with:",{container:e,widgetData:o}),console.log("Swiper available in render:",typeof Swiper!="undefined"),e.innerHTML="";let n=document.createElement("div");n.className="build-timestamp",n.textContent=`Build: ${H}`,e.appendChild(n);let i=document.createElement("div");i.className="w-full flex flex-col items-center justify-center";let r=document.createElement("div");r.className="relative w-full max-w-5xl mx-auto px-8 flex flex-col items-center";let l=document.createElement("div");l.className="swiper w-full",l.setAttribute("role","region"),l.setAttribute("aria-label","Reviews carousel");let s=document.createElement("div");s.className="swiper-wrapper",s.setAttribute("role","list"),(o.reviews||[]).forEach((t,g)=>{let h=document.createElement("div");h.className="swiper-slide flex flex-col items-center w-full h-[380px] rounded-3xl overflow-hidden bg-white shadow-lg p-8",h.setAttribute("role","group"),h.setAttribute("aria-label",`${g+1} / ${o.reviews.length}`),h.id=g===0?"style-UiHWZ":g===1?"style-ppbHr":"style-RwrbB";let b=document.createElement("div");b.className="w-full h-[380px] flex flex-col rounded-3xl overflow-hidden bg-white px-2 py-4 shadow text-sm style-UmL5Y",b.id="style-UmL5Y";let v=document.createElement("div");v.className="flex items-center justify-center mb-2 mt-0 style-JwAMc",v.id="style-JwAMc",v.innerHTML=`<span id="style-peIpo" class="style-peIpo">${P(t.rating)}</span>`;let $=document.createElement("div");$.className="flex-1 min-h-0 w-full flex flex-col justify-center text-center text-[14px] md:text-[16px] text-gray-800 break-words whitespace-pre-line relative overflow-hidden line-clamp-5";let A=document.createElement("p");A.className="mx-6 md:mt-0 text-[14px] md:text-[16px] text-center z-10 relative leading-relaxed style-M7nAj",A.id="style-M7nAj",A.textContent=t.content,$.appendChild(A);let M=document.createElement("div");M.className="flex flex-col items-center gap-1 w-full mt-auto mb-2";let y=document.createElement("span");y.className="font-semibold style-1eDJP",y.setAttribute("itemprop","author"),y.setAttribute("itemscope",""),y.setAttribute("itemtype","https://schema.org/Person"),y.id="style-1eDJP",y.innerHTML=`<span itemprop="name">${t.reviewer.name}</span>`;let x=document.createElement("span");x.className="text-xs style-QAonL",x.setAttribute("itemprop","author"),x.setAttribute("itemscope",""),x.setAttribute("itemtype","https://schema.org/Person"),x.id="style-QAonL",x.innerHTML=`<span itemprop="jobTitle">${t.reviewer.role}</span>`,M.appendChild(y),M.appendChild(x),b.appendChild(v),b.appendChild($),b.appendChild(M),h.appendChild(b),s.appendChild(h)}),l.appendChild(s);let c=document.createElement("div");c.className="swiper-pagination flex items-center justify-center mt-6",c.setAttribute("role","tablist");let a=((R=o.design)==null?void 0:R.accentColor)||"slateblue",k=((T=o.design)==null?void 0:T.accentHover)||"#4a3f8c",p="#fff",j="0 6px 32px 0 rgba(34,34,34,0.10), 0 1px 3px 0 rgb(0 0 0 / 0.1)",B="1.5rem",Y="inset 0 4px 32px rgba(34,34,34,0.08)",d=document.createElement("button");d.className="group absolute -left-8 top-1/2 -translate-y-1/2 z-10 rounded-full border border-gray-200 w-10 h-10 flex items-center justify-center transition hover:bg-opacity-80 active:scale-95 focus:scale-95 focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-[var(--pr-accent-color)] focus-visible:outline-offset-2 hidden md:flex",d.setAttribute("aria-label","Previous slide"),d.setAttribute("tabindex","0"),d.innerHTML='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" style="display: block; margin: auto;"><polygon points="12.5,3 5.5,10 12.5,17" fill="currentColor"/></svg>';let u=document.createElement("button");u.className="group absolute -right-8 top-1/2 -translate-y-1/2 z-10 rounded-full border border-gray-200 w-10 h-10 flex items-center justify-center transition hover:bg-opacity-80 active:scale-95 focus:scale-95 focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-[var(--pr-accent-color)] focus-visible:outline-offset-2 hidden md:flex",u.setAttribute("aria-label","Next slide"),u.setAttribute("tabindex","0"),u.innerHTML='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" style="display: block; margin: auto;"><polygon points="7.5,3 14.5,10 7.5,17" fill="currentColor"/></svg>';let f=document.createElement("button");f.className="group rounded-full border border-gray-200 w-10 h-10 flex items-center justify-center transition hover:bg-opacity-80 active:scale-95 focus:scale-95 focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-[var(--pr-accent-color)] focus-visible:outline-offset-2",f.setAttribute("aria-label","Previous slide"),f.setAttribute("tabindex","0"),f.innerHTML='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" style="display: block; margin: auto;"><polygon points="12.5,3 5.5,10 12.5,17" fill="currentColor"/></svg>';let m=document.createElement("button");m.className="group rounded-full border border-gray-200 w-10 h-10 flex items-center justify-center transition hover:bg-opacity-80 active:scale-95 focus:scale-95 focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-[var(--pr-accent-color)] focus-visible:outline-offset-2",m.setAttribute("aria-label","Next slide"),m.setAttribute("tabindex","0"),m.innerHTML='<svg width="16" height="16" viewBox="0 0 20 20" fill="none" style="display: block; margin: auto;"><polygon points="7.5,3 14.5,10 7.5,17" fill="currentColor"/></svg>';function z(){let t=document.createElement("button");return t.className="submit-review-btn font-semibold transition focus:outline-none focus-visible:outline focus-visible:outline-2 focus-visible:outline-[var(--pr-accent-color)] focus-visible:outline-offset-2",t.textContent="Submit a Review",t.style.background=p,t.style.color=a,t.style.borderRadius=B,t.style.boxShadow=j,t.style.padding="0.6em 2em",t.style.fontSize="1.08rem",t.style.border="1.5px solid #e5e7eb",t.style.marginLeft="1rem",t.style.marginRight="1rem",t.addEventListener("mouseenter",()=>{t.style.background=a,t.style.color="#fff"}),t.addEventListener("mouseleave",()=>{t.style.background=p,t.style.color=a}),t.addEventListener("focus",()=>{t.style.background=a,t.style.color="#fff"}),t.addEventListener("blur",()=>{t.style.background=p,t.style.color=a}),t}let N=z();N.className+=" inline-flex";let W=z();W.className+=" hidden md:inline-flex";let S=document.createElement("div");S.className="pr-pagination-row w-full flex justify-center mt-6 mb-2",S.appendChild(c);let w=document.createElement("div");w.className="pr-nav-row w-full flex items-center justify-center gap-2 mt-8 mb-2",f.className+=" inline-flex md:hidden",m.className+=" inline-flex md:hidden",N.className+=" inline-flex",d.className+=" hidden md:flex",u.className+=" hidden md:flex",w.appendChild(f),w.appendChild(m),w.appendChild(N),r.appendChild(l),r.appendChild(w),r.appendChild(S),r.appendChild(d),r.appendChild(u),i.appendChild(r),e.appendChild(i);let E=new Swiper(l,{slidesPerView:1,spaceBetween:24,navigation:{nextEl:[u,m],prevEl:[d,f],disabledClass:"swiper-button-disabled",lockClass:"swiper-button-lock",hiddenClass:"swiper-button-hidden"},pagination:{el:c,clickable:!0,bulletClass:"swiper-pagination-bullet",bulletActiveClass:"swiper-pagination-bullet-active",renderBullet:function(t,g){var v,$;let b=g.includes("swiper-pagination-bullet-active")?((v=o.design)==null?void 0:v.accentColor)||"slateblue":I((($=o.design)==null?void 0:$.accentColor)||"slateblue",.7);return'<span class="'+g+'" style="background: '+b+';"></span>'}},breakpoints:{768:{slidesPerView:2},1024:{slidesPerView:3}},on:{init:function(){this.navigation.update()},slideChange:function(){this.navigation.update()}}});return[d,u,f,m].forEach(t=>{t.style.background=p,t.style.borderRadius=B,t.style.boxShadow=j,t.style.color=a,t.querySelector("polygon").style.fill=a,t.addEventListener("mouseenter",()=>{t.style.background=a,t.style.color="#fff",t.querySelector("polygon").style.fill="#fff"}),t.addEventListener("mouseleave",()=>{t.style.background=p,t.style.color=a,t.querySelector("polygon").style.fill=a}),t.addEventListener("focus",()=>{t.style.background=a,t.style.color="#fff",t.querySelector("polygon").style.fill="#fff"}),t.addEventListener("blur",()=>{t.style.background=p,t.style.color=a,t.querySelector("polygon").style.fill=a})}),console.log("Swiper initialized:",E),E.update&&E.update(),E}async function F(){let e=document.querySelectorAll('.promptreviews-widget[data-widget-type="multi"]');for(let o of e){let n=o.getAttribute("data-widget");if(n)try{let i=await fetch(`/api/widgets/${n}`);if(!i.ok)throw new Error("Failed to load widget data");let r=await i.json();L(o,r)}catch(i){console.error("Error loading widget:",i),o.innerHTML='<div class="error">Failed to load widget</div>'}}}document.addEventListener("DOMContentLoaded",F),window.PromptReviews.renderMultiWidget=L,console.log("Widget script loaded successfully")})();})();
