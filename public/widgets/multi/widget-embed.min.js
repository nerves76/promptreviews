console.log("🔄 Multi Widget Script Loading...",(new Date).toISOString()),function(){"use strict";function e(e,n){return`\n      <div class="pr-review-card" style="\n        background: ${n.bgColor||"#fff"};\n        border: ${n.borderWidth||2}px solid ${n.borderColor||"#cccccc"};\n        border-radius: ${n.borderRadius||16}px;\n        box-shadow: 0 4px 32px rgba(34,34,34,${n.shadowIntensity||.2}) inset;\n        padding: 1.5rem;\n        min-height: 350px;\n        display: flex;\n        flex-direction: column;\n        gap: 0.75rem;\n        width: 100%;\n        max-width: 420px;\n        margin: 0 auto;\n        box-sizing: border-box;\n        text-align: center;\n      ">\n        <div class="stars-row" style="display: flex; gap: 0.25rem; margin-bottom: 0.5rem; justify-content: center;">\n          ${function(e){("number"!=typeof e||e<0||e>5)&&(e=5);const n=Math.floor(e),i=e%1!=0,t=5-n-(i?1:0);return`<span class="stars" style="color: gold; font-size: 1.25rem;">${"★".repeat(n)+(i?"½":"")+"☆".repeat(t)}</span>`}(e.star_rating)}\n        </div>\n        <div class="review-content" style="flex-grow: 1; display: flex; flex-direction: column; gap: 0.25rem; align-items: center; justify-content: center;">\n          ${n.showQuotes?'<div style="font-size: 3.5rem; line-height: 1; color: '+(n.accentColor||"#6a5acd")+'; opacity: 0.2; font-family: Georgia, serif; margin-bottom: -1.5rem; margin-left: -1rem; align-self: flex-start;">"</div>':""}\n          <div class="review-text" style="\n            font-size: 1rem;\n            line-height: ${n.lineSpacing||1.75};\n            color: ${n.textColor||"#22223b"};\n            margin: 0;\n            text-align: center;\n            word-wrap: break-word;\n            overflow-wrap: break-word;\n          ">${e.review_content}</div>\n          ${n.showQuotes?'<div style="font-size: 3.5rem; line-height: 1; color: '+(n.accentColor||"#6a5acd")+'; opacity: 0.2; font-family: Georgia, serif; margin-top: -1.5rem; margin-right: -1rem; align-self: flex-end;">"</div>':""}\n        </div>\n        <div class="reviewer-details" style="margin-top: auto; padding-top: 1rem; border-top: 1px solid ${n.borderColor||"#cccccc"};">\n          <div class="reviewer-name" style="\n            font-weight: 600;\n            font-size: ${n.attributionFontSize||1}rem;\n            color: ${n.nameTextColor||"#111111"};\n            margin-bottom: 0.25rem;\n            line-height: 1.2;\n          ">${e.first_name||"Anonymous"} ${e.last_name||""}</div>\n          <div class="reviewer-role" style="\n            font-size: calc(${n.attributionFontSize||1}rem * 0.875);\n            color: ${n.roleTextColor||"#666666"};\n            margin-bottom: 0.75rem;\n          ">${e.reviewer_role||""}</div>\n          ${n.showRelativeDate?`<div class="reviewer-date" style="font-size: 0.75rem; color: ${n.textColor||"#6b7280"}; opacity: 0.7;">${function(e){const n=new Date,i=new Date(e),t=n.getTime()-i.getTime(),o=Math.floor(t/1e3),r=Math.floor(o/60),l=Math.floor(r/60),s=Math.floor(l/24);return s>0?`${s} day${s>1?"s":""} ago`:l>0?`${l} hour${l>1?"s":""} ago`:r>0?`${r} minute${r>1?"s":""} ago`:"just now"}(e.created_at)}</div>`:""}\n        </div>\n      </div>\n    `}function n(n,i,t){console.log("🎨 Creating Grid HTML for",n.length,"reviews");return`\n      <div class="widget-outer-container" style="\n        position: relative;\n        width: 100%;\n        max-width: 1280px;\n        margin: 0 auto;\n        padding: 0;\n        box-sizing: border-box;\n        overflow: visible;\n      ">\n        <div class="widget-carousel-container" style="\n          position: relative;\n          width: 100%;\n          max-width: 100%;\n          margin: 0 auto;\n          padding: 0 1rem;\n          overflow: visible;\n        ">\n          <div class="reviews-grid" style="\n            display: grid;\n            grid-template-columns: repeat(1, 1fr);\n            gap: 2rem;\n            padding: 2rem 0;\n          ">\n            ${n.map((n=>e(n,i))).join("")}\n          </div>\n        </div>\n        ${i.showSubmitReviewButton?`\n        <div class="submit-review-button-container" style="text-align: center; margin-top: 2rem;">\n          <a href="/r/${t}" target="_blank" class="submit-review-button" style="\n            display: inline-block;\n            background: ${i.accentColor||"#6a5acd"};\n            color: white;\n            padding: 12px 24px;\n            border-radius: 8px;\n            text-decoration: none;\n            font-weight: 600;\n            transition: background-color 0.3s ease;\n          ">Submit a review</a>\n        </div>\n        `:""}\n      </div>\n      \n      <style>\n        @media (min-width: 768px) {\n          .reviews-grid {\n            grid-template-columns: repeat(2, 1fr) !important;\n          }\n        }\n        @media (min-width: 1024px) {\n          .reviews-grid {\n            grid-template-columns: repeat(3, 1fr) !important;\n          }\n        }\n      </style>\n    `}window.PromptReviews=window.PromptReviews||{},window.PromptReviews.renderMultiWidget=function(i,t){if(console.log("🎯 renderMultiWidget called"),console.log("Container:",i),console.log("Data:",t),!i)return void console.error("❌ No container provided");if(i.dataset.widgetInitialized)return void console.log("⚠️ Widget already initialized, skipping");i.dataset.widgetInitialized="true";const{reviews:o,design:r,businessSlug:l}=t;console.log("🎯 renderMultiWidget called with",o.length,"reviews"),o&&0!==o.length?function(e){if(console.log("🔄 Loading Swiper..."),"undefined"!=typeof Swiper)return console.log("✅ Swiper already available"),void e(!0);const n=["https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js","https://unpkg.com/swiper@11/swiper-bundle.min.js","https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"],i=["https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css","https://unpkg.com/swiper@11/swiper-bundle.min.css","https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.css"];let t=0,o=!1,r=!1;function l(){o&&r&&(console.log("✅ Swiper CSS and JS both loaded successfully"),e(!0))}!function s(){if(t>=n.length)return console.log("❌ All Swiper CDN sources failed"),void e(!1);const a=n[t],d=i[t];if(console.log(`📦 Trying Swiper from: ${a}`),document.querySelector(`script[src="${a}"]`)){console.log("📦 Swiper script already loading, waiting...");const e=setInterval((()=>{"undefined"!=typeof Swiper&&(clearInterval(e),console.log("✅ Swiper loaded successfully"),r=!0,l())}),100);return void setTimeout((()=>{clearInterval(e),console.log("❌ Swiper loading timed out, trying next URL"),t++,s()}),3e3)}const c=document.createElement("link");c.rel="stylesheet",c.href=d,c.onload=()=>{console.log("✅ Swiper CSS loaded successfully"),o=!0,l()},c.onerror=()=>{console.error("❌ Failed to load Swiper CSS from",d)},document.head.appendChild(c);const p=document.createElement("script");p.src=a,p.onload=()=>{console.log("✅ Swiper JS loaded successfully from",a),r=!0,l()},p.onerror=()=>{console.error("❌ Failed to load Swiper from",a),t++,s()},document.head.appendChild(p)}()}((t=>{try{if(t&&o.length>1){console.log("🎠 Using Swiper carousel");const n=function(n,i,t){return console.log("🎨 Creating Swiper HTML for",n.length,"reviews"),`\n      <div class="widget-outer-container" style="\n        position: relative;\n        width: 100%;\n        max-width: 1280px;\n        margin: 0 auto;\n        padding: 0;\n        box-sizing: border-box;\n        overflow: visible;\n      ">\n        <div class="widget-carousel-container" style="\n          position: relative;\n          width: 100%;\n          max-width: 100%;\n          margin: 0 auto;\n          padding: 0 1rem;\n          overflow: visible;\n        ">\n          <div class="swiper" style="\n            position: static;\n            z-index: 1;\n            overflow: hidden;\n            padding-top: 10px;\n            padding-bottom: 60px;\n          ">\n            <div class="swiper-wrapper" style="display: flex; align-items: stretch;">\n              ${n.map((n=>`\n      <div class="swiper-slide">\n        ${e(n,i)}\n      </div>\n    `)).join("")}\n            </div>\n          </div>\n          <div class="swiper-pagination" style="\n            position: absolute;\n            bottom: 10px;\n            left: 50%;\n            transform: translateX(-50%);\n            display: flex;\n            gap: 8px;\n            z-index: 10;\n          "></div>\n          <div class="swiper-navigation" style="\n            position: absolute;\n            top: 50%;\n            left: 0;\n            right: 0;\n            transform: translateY(-50%);\n            display: flex;\n            justify-content: space-between;\n            pointer-events: none;\n            z-index: 10;\n          ">\n            <div class="swiper-button-prev" style="\n              width: 40px;\n              height: 40px;\n              background: rgba(255,255,255,0.9);\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              cursor: pointer;\n              pointer-events: auto;\n              box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n            ">‹</div>\n            <div class="swiper-button-next" style="\n              width: 40px;\n              height: 40px;\n              background: rgba(255,255,255,0.9);\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              cursor: pointer;\n              pointer-events: auto;\n              box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n            ">›</div>\n          </div>\n        </div>\n        ${i.showSubmitReviewButton?`\n        <div class="submit-review-button-container" style="text-align: center; margin-top: 2rem;">\n          <a href="/r/${t}" target="_blank" class="submit-review-button" style="\n            display: inline-block;\n            background: ${i.accentColor||"#6a5acd"};\n            color: white;\n            padding: 12px 24px;\n            border-radius: 8px;\n            text-decoration: none;\n            font-weight: 600;\n            transition: background-color 0.3s ease;\n          ">Submit a review</a>\n        </div>\n        `:""}\n      </div>\n    `}(o,r,l);i.innerHTML=n,setTimeout((()=>{!function(e){console.log("🎯 Initializing Swiper...");const n=e.querySelector(".swiper");if(!n)return void console.log("❌ Swiper element not found");const i=n.querySelectorAll(".swiper-slide");if(console.log("📊 Found",i.length,"slides"),i.length<=1){console.log("📱 Single review, hiding Swiper controls");const n=e.querySelector(".swiper-pagination"),i=e.querySelector(".swiper-navigation");return n&&(n.style.display="none"),void(i&&(i.style.display="none"))}try{new Swiper(n,{loop:!1,spaceBetween:16,centeredSlides:!1,autoplay:!1,breakpoints:{320:{slidesPerView:1,spaceBetween:16,centeredSlides:!0},768:{slidesPerView:2,spaceBetween:20,centeredSlides:!1},1024:{slidesPerView:3,spaceBetween:24,centeredSlides:!1}},pagination:{el:e.querySelector(".swiper-pagination"),clickable:!0,type:"bullets",dynamicBullets:!1},navigation:{nextEl:e.querySelector(".swiper-button-next"),prevEl:e.querySelector(".swiper-button-prev")},on:{init:function(){console.log("✅ Swiper initialized successfully")}}}),console.log("✅ Swiper initialized with responsive breakpoints")}catch(e){console.error("❌ Failed to initialize Swiper:",e)}}(i)}),100)}else{console.log("📱 Using grid layout (Swiper not available or single review)");const e=n(o,r,l);i.innerHTML=e}console.log("✅ Widget rendered successfully")}catch(e){console.error("❌ Error rendering widget:",e),console.log("🔄 Falling back to grid layout");const t=n(o,r,l);i.innerHTML=t}})):i.innerHTML='<div style="padding: 20px; text-align: center; color: #666;">No reviews to display.</div>'},console.log("✅ Widget script loaded successfully"),console.log("🔧 PromptReviews object available:",!!window.PromptReviews),console.log("🔧 renderMultiWidget available:",!(!window.PromptReviews||!window.PromptReviews.renderMultiWidget))}();