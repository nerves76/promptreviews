!function(){async function e(){document.querySelectorAll('.promptreviews-widget[data-widget-type="multi"][data-widget]').forEach((async e=>{const t=e.getAttribute("data-widget");if(t){e.innerHTML='<div style="text-align:center;padding:2em;color:#888;">Loading widget…</div>';try{const r=await fetch(`/api/widgets/${t}`);if(!r.ok)throw new Error("Widget not found");!function(e,t){e.innerHTML="";const r=document.createElement("div");r.className="promptreviews-multi-widget";const o=t.design||{};r.style.setProperty("--bg-color",o.bgColor||"#fff"),r.style.setProperty("--text-color",o.textColor||"#22223b"),r.style.setProperty("--accent-color",o.accentColor||"#1A237E"),r.style.setProperty("--body-text-color",o.bodyTextColor||"#22223b"),r.style.setProperty("--name-text-color",o.nameTextColor||"#1a237e"),r.style.setProperty("--role-text-color",o.roleTextColor||"#6b7280"),r.style.setProperty("--quote-font-size",`${o.quoteFontSize||18}px`),r.style.setProperty("--attribution-font-size",`${o.attributionFontSize||15}px`),r.style.setProperty("--border-radius",`${o.borderRadius||16}px`),r.style.setProperty("--line-spacing",o.lineSpacing||1.4),r.style.setProperty("--border-width",`${o.borderWidth||2}px`),r.style.setProperty("--border-color",o.borderColor||"#cccccc"),r.style.setProperty("--shadow-color",o.shadowColor||"#222222"),r.style.setProperty("--shadow-intensity",o.shadowIntensity||.2);const n=t.reviews||[];r.innerHTML=`\n            <div class="widget-container">\n                <div class="widget-content">\n                    ${n.length>0?n.map((e=>`\n                        <div class="review-card">\n                            <div class="review-content">\n                                ${o.showQuotes?'<span class="quote-mark">"</span>':""}\n                                <p class="review-text">${e.review_content}</p>\n                                ${o.showQuotes?'<span class="quote-mark">"</span>':""}\n                            </div>\n                            <div class="reviewer-info">\n                                <div class="reviewer-details">\n                                    <p class="reviewer-name">${e.first_name} ${e.last_name}</p>\n                                    ${e.reviewer_role?`<p class="reviewer-role">${e.reviewer_role}</p>`:""}\n                                </div>\n                                <div class="star-rating">\n                                    ${Array(5).fill(0).map(((t,r)=>`\n                                        <span class="star ${r<(e.star_rating??0)?"filled":""}">★</span>\n                                    `)).join("")}\n                                </div>\n                            </div>\n                        </div>\n                    `)).join(""):'<div class="review-card">No reviews yet.</div>'}\n                </div>\n            </div>\n        `,e.appendChild(r)}(e,await r.json())}catch(t){e.innerHTML='<div style="color:red;text-align:center;padding:2em;">Failed to load widget.</div>'}}}))}window.PromptReviews=window.PromptReviews||{},window.PromptReviews.init=e,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}();