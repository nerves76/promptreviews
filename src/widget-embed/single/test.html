<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SingleWidget Test</title>
    <link rel="stylesheet" href="./SingleWidget.css">
</head>
<body>
    <div id="promptreviews-widget" class="promptreviews-widget" data-widget="test-single" data-widget-type="single"></div>
    <script>
        // Mock API endpoint for local test
        window.fetch = async (url) => {
            if (url.includes('/api/widgets/')) {
                return {
                    ok: true,
                    json: async () => ({
                        id: 'test-single',
                        widget_type: 'single',
                        name: 'Test Single Widget',
                        design: {
                            bgColor: '#f8fafc',
                            textColor: '#22223b',
                            accentColor: '#1A237E',
                            bodyTextColor: '#22223b',
                            nameTextColor: '#1a237e',
                            roleTextColor: '#6b7280',
                            quoteFontSize: 18,
                            attributionFontSize: 15,
                            borderRadius: 16,
                            shadow: true,
                            bgOpacity: 1,
                            border: true,
                            borderWidth: 2,
                            lineSpacing: 1.4,
                            showQuotes: true,
                            showRelativeDate: false,
                            width: 800,
                            sectionBgType: 'none',
                            sectionBgColor: '#ffffff',
                            shadowIntensity: 0.2,
                            shadowColor: '#222222',
                            borderColor: '#cccccc',
                            showSubmitReviewButton: true,
                        },
                        reviews: [
                            {
                                id: '1',
                                review_content: 'This is a single review. SingleWidget works!',
                                first_name: 'Alice',
                                last_name: 'Smith',
                                reviewer_role: 'Manager',
                                star_rating: 5,
                                created_at: '2024-06-01'
                            }
                        ]
                    })
                };
            }
            return window.originalFetch ? window.originalFetch(url) : Promise.reject('No fetch');
        };
    </script>
    <script src="/widget.js"></script>
</body>
</html> 